# POE2 0.4 物品过滤器 - 安装说明

## 📦 快速开始

### 方法一：自动安装（推荐）

**双击运行** `install.bat` 即可自动安装所有过滤器文件和声音文件。

脚本会自动创建符号链接到你的 POE2 游戏目录。

### 方法二：手动安装

1. 复制所有 `.filter` 文件到：
   ```
   %USERPROFILE%\Documents\My Games\Path of Exile 2\
   ```

2. 复制整个 `sounds/` 文件夹到同一目录。

## ⚙️ 系统要求

### 必需条件
- **操作系统**：Windows 11
- **游戏**：Path of Exile 2（0.4 赛季）
- **游戏状态**：至少运行过一次

### 权限要求（满足其一即可）
- 管理员权限
- Windows 开发者模式已启用

#### 如何启用开发者模式

1. 打开 **设置**
2. 进入 **更新和安全** → **开发者选项**
3. 启用 **开发者模式**

## 📂 文件结构

```
poe2-item-filter/
├── install.bat              ← 双击运行（启动器）
├── install.ps1              ← 安装脚本（英文界面，避免编码问题）
├── poe2-0.4.filter          ← 主过滤器文件
├── sounds/                  ← 自定义声音文件（直接放在根目录）
│   ├── 混沌石.mp3
│   ├── 神圣石.mp3
│   ├── 传奇项链.mp3
│   └── ...
├── docs/                    ← 文档目录
│   ├── 物品对照表.md         ← 物品名称对照表
│   ├── 物品视觉样式.md       ← 视觉样式规范
│   └── 安装说明.md          ← 本文件
├── sounds/README.md         ← 声音文件文档
├── CLAUDE.md                ← 开发者指南
└── README.md                ← 项目说明
```

## 🎯 安装流程

当你运行 `install.bat` 时，脚本会执行以下操作：

1. ✅ 检测 POE2 游戏目录
2. ✅ 查找当前目录所有 `.filter` 文件
3. ✅ 查找 `sounds` 目录（可选）
4. ⚠️ 如果文件已存在，提示确认
   - 按 **回车键** 继续安装（覆盖现有文件）
   - 按 **ESC 键** 取消安装
5. ✅ 创建符号链接
6. ✅ 显示安装摘要

### 什么是符号链接？

符号链接（Symbolic Link）是一种特殊的文件系统对象：
- 类似于快捷方式，但更强大
- 程序将其视为真实文件
- 修改源文件会自动同步到游戏中
- 不占用额外磁盘空间

## 🔧 故障排查

### 错误：无法创建符号链接

**原因**：权限不足

**解决方案**：
- 右键点击 `install.bat` → **以管理员身份运行**
- 或启用 Windows 开发者模式

### 错误：找不到 POE2 游戏目录

**原因**：游戏未安装或从未运行过

**解决方案**：
1. 安装 Path of Exile 2
2. 至少运行游戏一次
3. 确认使用默认安装路径

### 错误：脚本执行已被禁用

**原因**：PowerShell 执行策略限制

**解决方案**：
以管理员身份打开 PowerShell，运行：
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 错误：声音文件无法播放

**可能原因**：
1. 声音文件不存在
2. 文件名不正确
3. 文件格式不是 MP3

**解决方案**：
1. 检查 `sounds/` 目录是否存在
2. 确认文件名使用简体中文
3. 验证文件格式为 MP3

## 📝 安装后配置

1. 启动 **Path of Exile 2**
2. 进入 **设置** → **物品过滤器**
3. 从列表中选择 `poe2-0.4.filter`
4. 点击应用

## 🔄 更新过滤器

由于使用符号链接：
1. 直接修改本目录中的 `.filter` 文件
2. 修改会**立即**在游戏中生效
3. 无需重新运行安装脚本

### 更新步骤示例

```bash
# 1. 编辑过滤器文件
notepad poe2-0.4.filter

# 2. 保存后，游戏中自动生效
# 3. 无需其他操作！
```

## 🗑️ 卸载

删除 POE2 目录中的链接文件：
```
C:\你的用户名\Documents\My Games\Path of Exile 2\
├── poe2-0.4.filter
└── sounds\
```

**注意**：这**不会**影响本仓库中的源文件。

## 💡 使用技巧

### ✅ 优势
- 节省磁盘空间
- 修改自动同步
- 易于维护和更新
- 支持版本控制

### ⚠️ 注意事项
- 安装后不要移动或重命名本仓库目录
- 不要删除源文件
- 保持符号链接有效

## 🌐 语言支持

本项目的语言策略：
- **安装脚本 UI**：英文（避免编码问题）
- **过滤器文件**：中文注释（兼容 POE2 中文客户端）
- **文档**：简体中文（面向中文玩家）
- **声音文件**：简体中文命名

### 为什么安装脚本使用英文？

在 Windows 环境下，包含中文字符的脚本文件可能遇到编码问题：
- 不同系统编码可能导致乱码
- PowerShell 执行中文脚本可能失败
- 使用英文 UI 可确保最大兼容性

## 📚 相关文档

- [README.md](../README.md) - 项目概述和快速开始
- [物品对照表.md](物品对照表.md) - 物品名称映射表
- [物品视觉样式.md](物品视觉样式.md) - 完整视觉规范
- [sounds/README.md](../sounds/README.md) - 声音文件指南

## 🆘 获取帮助

如果遇到问题：
1. 查看本文档的故障排查章节
2. 检查 [GitHub Issues](https://github.com/yourusername/poe2-item-filter/issues)
3. 提交新的 Issue 或 Pull Request

## 📄 许可证

MIT License - Copyright (c) 2025

---

**版本**：1.0
**最后更新**：2025-01-01
**游戏版本**：POE2 0.4 赛季
